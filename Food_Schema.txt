-- Schema
--Tables

CREATE TABLE Menu (
	MenuID INT NOT NULL PRIMARY KEY, 
	Name VARCHAR(25) NOT NULL,
	Price FLOAT(5,2) NOT NULL CHECK(Price>=0),
	Cuisine VARCHAR(25),
	Description VARCHAR(500),
	Offer FLOAT(5,2) NOT NULL CHECK(Offer<=1 AND Offer>=0),
	Visible boolean NOT NULL
	);

CREATE TABLE Users(
	UserID INT PRIMARY KEY,
	UserName VARCHAR(25) UNIQUE NOT NULL,
	Password VARCHAR(25) Not NULL,
	Email VARCHAR(25),
	Address VARCHAR (100)
	);

CREATE TABLE Orders(
	OrderNumber INT PRIMARY KEY,
	UserID INT FOREIGN KEY REFERENCES Users(UserID),
	OrderTime DATETIME,
	Cost FLOAT(5,2) CHECK(Cost>=0)
	);

CREATE TABLE OrderHistory(
	OHKey INT PRIMARY KEY,
	OrderNumber INT FOREIGN KEY REFERENCES Orders(OrderNumber),
	Item INT FOREIGN KEY REFERENCES Menu(MenuID),
	Quantity INT CHECK(Quantity>0)
	);

CREATE TABLE Cart(
	CartIndex INT PRIMARY KEY,
	Item INT FOREIGN KEY REFERENCES Menu(MenuID),
	Quantity INT CHECK(Quantity>0)
	);

--Sequences
CREATE SEQUENCE sequence_Menu
START WITH 0
INCREMENT BY 1;

CREATE SEQUENCE sequence_User
START WITH 0
INCREMENT BY 1;

CREATE SEQUENCE sequence_Orders
START WITH 0
INCREMENT BY 1;

CREATE SEQUENCE sequence_OrderHistory
START WITH 0
INCREMENT BY 1;

CREATE SEQUENCE sequence_Cart
START WITH 0
INCREMENT BY 1;